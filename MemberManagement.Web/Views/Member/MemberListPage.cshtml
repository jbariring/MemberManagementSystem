@model MemberManagement.Web.ViewModels.MemberListVM

<link rel="stylesheet" href="~/css/member/MemberList.css" />

<div class="list-container">

    <div class="header-frame">
        <i class="header-icon fa fa-users"></i>
        <div class="header-text">Member List</div>
    </div>

    <div class="top-row">
        <form id="searchForm" method="get" class="search-form">
            <input id="searchLastName" name="searchLastName" class="search-input"
                   value="@Model.SearchLastName"
                   placeholder="Search by Last Name..." />

            <select id="branch" asp-for="Branch" asp-items="Model.Branches">
                <option value="">All Branches</option>
            </select>

            <button class="btn-search" type="button" onclick="loadMembers(1)">Search</button>
        </form>

        <a asp-action="Create" class="btn-create">Create New Member</a>
    </div>

    <!-- Only this container -->
    <div id="memberList">
        @await Html.PartialAsync("Index", Model)
    </div>
</div>

<script>
    function loadMembers(pageNumber) {
        const searchLastName = document.getElementById("searchLastName").value;
        const branch = document.getElementById("branch").value;

        fetch(`/Member/MemberListPage?searchLastName=${searchLastName}&branch=${branch}&pageNumber=${pageNumber}`)
            .then(response => response.text())
            .then(html => {
                document.getElementById("memberList").innerHTML = html;
            });
    }
</script>
